var W=Object.defineProperty;var U=s=>{throw TypeError(s)};var Y=(s,e,t)=>e in s?W(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var w=(s,e,t)=>Y(s,typeof e!="symbol"?e+"":e,t),Z=(s,e,t)=>e.has(s)||U("Cannot "+t);var h=(s,e,t)=>(Z(s,e,"read from private field"),t?t.call(s):e.get(s)),y=(s,e,t)=>e.has(s)?U("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),C=(s,e,t,n)=>(Z(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t);var M=(s,e,t,n)=>({set _(r){C(s,e,r,t)},get _(){return h(s,e,n)}});import{o as d,c,a as p,k as ee,s as te,i as F,u,x as se,y as ne,t as G,m as re,z as ae,A as ie,f as B,d as le,g as o,w as v,B as oe,F as j,r as L,h as k,n as D}from"./index-BHjz-YFM.js";import{r as ue}from"./Algebra-BcYAocAy.js";function de(s,e){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[p("path",{d:"M8.5 4.75a.75.75 0 0 0-1.107-.66l-6 3.25a.75.75 0 0 0 0 1.32l6 3.25a.75.75 0 0 0 1.107-.66V8.988l5.393 2.921A.75.75 0 0 0 15 11.25v-6.5a.75.75 0 0 0-1.107-.66L8.5 7.013V4.75Z"})])}function ce(s,e){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[p("path",{d:"M2.53 3.956A1 1 0 0 0 1 4.804v6.392a1 1 0 0 0 1.53.848l5.113-3.196c.16-.1.279-.233.357-.383v2.73a1 1 0 0 0 1.53.849l5.113-3.196a1 1 0 0 0 0-1.696L9.53 3.956A1 1 0 0 0 8 4.804v2.731a.992.992 0 0 0-.357-.383L2.53 3.956Z"})])}function pe(s,e){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[p("path",{d:"M4.5 2a.5.5 0 0 0-.5.5v11a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-11a.5.5 0 0 0-.5-.5h-1ZM10.5 2a.5.5 0 0 0-.5.5v11a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-11a.5.5 0 0 0-.5-.5h-1Z"})])}function me(s,e){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[p("path",{d:"M3 3.732a1.5 1.5 0 0 1 2.305-1.265l6.706 4.267a1.5 1.5 0 0 1 0 2.531l-6.706 4.268A1.5 1.5 0 0 1 3 12.267V3.732Z"})])}function he(s,e){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[p("rect",{width:"10",height:"10",x:"3",y:"3",rx:"1.5"})])}const x={__name:"Button",props:{disabled:{type:Boolean,default:!1},color:{type:String,default:"primary",required:!1,validator:s=>["primary","success","warning","warn","danger","error"].includes(s)}},setup(s){const e=s,t=ee(()=>{let n=[];const r={primary:["bg-primary text-white"],success:["bg-green-500 text-slate-900"],warning:["bg-amber-500 text-slate-900"],warn:["bg-amber-500 text-slate-900"],danger:["bg-red-500 text-white"],error:["bg-red-500 text-white"]};return n.push(r[e.color]),e.disabled&&n.push("disabled"),n});return(n,r)=>(d(),c("button",{class:F(["select-none",u(t)])},[te(n.$slots,"default")],2))}},ve={class:"flex flex-col justify-center"},xe={key:0,for:"default-range",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},fe=["min","max","step"],ge={__name:"Range",props:se({label:String,min:[String,Number],max:[String,Number],step:[String,Number]},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(s){const e=ne(s,"modelValue");return(t,n)=>(d(),c("div",ve,[s.label?(d(),c("label",xe,G(s.label),1)):re("",!0),ae(p("input",{id:"default-range",type:"range","onUpdate:modelValue":n[0]||(n[0]=r=>e.value=r),min:s.min,max:s.max,step:s.step,class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"},null,8,fe),[[ie,e.value]])]))}},be=(s,e,t,n,r)=>(s-e)*(r-n)/(t-e)+n,E=s=>new Promise(e=>setTimeout(e,s)),f=new(window.AudioContext||window.webkitAudioContext),V=(s=0,e,t=.05)=>{s=be(s,e.min,e.max,200,800);let n=f.createOscillator(),r=f.createGain(),A=f.createDynamicsCompressor();n.frequency.value=s,n.type="sine",r.gain.value=.1,n.connect(r).connect(A).connect(f.destination),r.gain.exponentialRampToValueAtTime(.003,f.currentTime+t),n.start(f.currentTime),n.stop(f.currentTime+t)},we=s=>X.find(e=>e.name===s.state).color,ye=(s,e)=>Math.max(s.value/Math.max(...e.map(t=>t.value))*100,1),X=[{name:"sorted",color:"#4fd967",label:"Trié"},{name:"unsorted",color:"#d94f4f",label:"Pas triée"},{name:"processing",color:"#0bf5e8",label:"En traitement"},{name:"save",color:"#e17b30",label:"En état de sauvegarde"}];var S,g,b;class ${constructor(){y(this,S);y(this,g,[]);y(this,b,0)}get serie(){return h(this,S)}set serie(e){if(!(e instanceof O))throw"Given serie argument is not an instance of 'Serie'";C(this,S,e)}get steps(){return h(this,g)}saveStep(e,t){h(this,g).push({type:e,step:t})}next(){return M(this,b)._++,h(this,g)[h(this,b)-1]}prev(){return M(this,b)._--,h(this,g)[h(this,b)+1]}async play(){for(let e=0;e<this.steps.length;e++){let t=this.next();console.log("next",t)}}pause(){}resume(){}}S=new WeakMap,g=new WeakMap,b=new WeakMap;var _;class O{constructor(){y(this,_,0);w(this,"numbers",[]);w(this,"sort");w(this,"onUpdateCallback")}get min(){return Math.min(...this.numbers.map(e=>e.value))}get max(){return Math.max(...this.numbers.map(e=>e.value))}set length(e){e<5?e=5:e>200&&(e=200),C(this,_,e)}get length(){return h(this,_)}setSort(e){if(!(e instanceof $))throw"The sort argument given is not an instance of 'SortComponent'";e.serie=this,this.sort=e,this.sort.process()}applySort(){return this.sort.play().then(this.onUpdateCallback)}onUpdate(e){this.onUpdateCallback=e}}_=new WeakMap;class Se extends ${process(){for(let e=this.serie.numbers.length-1;e>=0;e--){for(let t=0;t<e;t++)if(this.saveStep("processing",{index:t}),this.serie.numbers[t].value>this.serie.numbers[t+1].value){let n=this.serie.numbers[t+1];this.serie.numbers[t+1]=this.serie.numbers[t],this.serie.numbers[t]=n,this.saveStep("swap",{indexA:t,indexB:t+1})}else this.saveStep("unsorted",{index:t});this.saveStep("sorted",{index:e})}for(let e=0;e<this.serie.numbers.length;e++)this.saveStep("processing",{index:e}),this.saveStep("sorted",{index:e})}}class _e extends ${constructor(){super(...arguments);w(this,"steps",[]);w(this,"currentStep",0)}process(){for(let t=0;t<this.serie.length;t++){let n={value:Math.floor(ue(0,1e4)),state:"unsorted"};this.serie.numbers[t]=n}}}class Ce extends ${process(){let e=0;for(let t=0;t<this.serie.numbers.length-1;t++){e=t,this.serie.numbers[e].state="save",this.saveStep("save",{index:e});for(let r=t;r<this.serie.numbers.length;r++)r>t&&(this.serie.numbers[r].state="processing",this.saveStep("processing",{index:r})),this.serie.numbers[r].value<this.serie.numbers[e].value&&(this.serie.numbers[e].state="unsorted",this.saveStep("unsorted",{index:e}),e=r,this.serie.numbers[r].state="save",this.saveStep("save",{index:r})),this.serie.numbers[r].state==="processing"&&(this.serie.numbers[r].state="unsorted",this.saveStep("unsorted",{index:r}));let n=this.serie.numbers[t];this.serie.numbers[t]=this.serie.numbers[e],this.serie.numbers[e]=n,this.saveStep("swap",{indexA:t,indexB:e}),this.saveStep("sorted",{index:t})}this.saveStep("sorted",{index:this.serie.numbers.length-1});for(let t=0;t<this.serie.numbers.length;t++)this.serie.numbers[t].state="unsorted",this.saveStep("processing",{index:t}),this.saveStep("sorted",{index:t})}}const Be={class:"flex flex-col items-start gap-16 h-100"},ke={class:"flex flex-row gap-4"},Ve={class:"flex gap-1 h-64 overflow-x-auto w-full"},$e={class:"flex flex-col justify-end items-center gap-4 h-full flex-1"},Ae=["data-number"],Me={class:"flex items-center gap-8"},Re={class:"flex items-center gap-2"},Ue={__name:"index",setup(s){const e=B([]),t=new O,n=B(!1),r=B(28);t.onUpdate(()=>{e.value=[...t.numbers]});const A=()=>{t.setSort(new Se)},q=()=>{t.setSort(new Ce)},R=()=>{t.setSort(new _e),t.applySort()},H=()=>{n.value=!0,P()},T=()=>{let i=t.sort.next();return new Promise(a=>{if(i)return N(i).then(a);n.value=!1,a()})},I=()=>{let i=t.sort.prev();return new Promise(a=>{if(i)return N(i).then(a);n.value=!1,a()})},P=()=>{T().then(async()=>{await E(r.value),n.value&&P()})},J=()=>{n.value=!1},m=B(),N=async i=>{if(i.type==="sorted")e.value[i.step.index].state="sorted";else if(i.type==="swap"){V(e.value[i.step.indexA].value,t),V(e.value[i.step.indexB].value,t);let a=i.step.indexA,l=i.step.indexB;m.value[a].style.transitionProperty="",m.value[l].style.transitionProperty="transform";let K=m.value[a].getBoundingClientRect(),z=m.value[l].getBoundingClientRect().left-K.left;m.value[a].style.transform=`translateX(${z}px)`,m.value[l].style.transform=`translateX(${-z}px)`,E(r.value).then(async()=>{m.value[a].style.transitionProperty="none",m.value[l].style.transitionProperty="none",m.value[a].style.transform="",m.value[l].style.transform="";let Q=e.value[a];e.value[a]=e.value[l],e.value[l]=Q})}else i.type==="processing"?(e.value[i.step.index].state="processing",V(e.value[i.step.index].value,t)):i.type==="unsorted"?e.value[i.step.index].state="unsorted":i.type==="save"&&(V(e.value[i.step.index].value,t),e.value[i.step.index].state="save")};return le(()=>{t.length=30,R()}),(i,a)=>(d(),c("div",Be,[p("div",ke,[o(x,{class:"p-2 rounded text-gray-900",color:"success",onClick:A},{default:v(()=>a[1]||(a[1]=[k("Bubble sort")])),_:1}),o(x,{class:"p-2 rounded text-gray-900",color:"success",onClick:q},{default:v(()=>a[2]||(a[2]=[k("Selection sort")])),_:1}),o(x,{class:"p-2 rounded text-gray-900",color:"error",onClick:R},{default:v(()=>a[3]||(a[3]=[k("Randomize")])),_:1}),o(x,{class:"p-2 rounded",onClick:H},{default:v(()=>[o(u(me),{style:{width:"20px",height:"20px"}})]),_:1}),o(x,{class:"p-2 rounded",onClick:J},{default:v(()=>[o(u(pe),{style:{width:"20px",height:"20px"}})]),_:1}),o(x,{class:"p-2 rounded"},{default:v(()=>[o(u(he),{style:{width:"20px",height:"20px"}})]),_:1}),o(x,{class:"p-2 rounded",onClick:I},{default:v(()=>[o(u(de),{style:{width:"20px",height:"20px"}})]),_:1}),o(x,{class:"p-2 rounded",onClick:T},{default:v(()=>[o(u(ce),{style:{width:"20px",height:"20px"}})]),_:1}),o(ge,{label:`Vitesse: ${u(r)}`,modelValue:u(r),"onUpdate:modelValue":a[0]||(a[0]=l=>oe(r)?r.value=l:null),min:"1",max:"500",step:"1"},null,8,["label","modelValue"])]),a[4]||(a[4]=p("hr",null,null,-1)),p("div",Ve,[(d(!0),c(j,null,L(u(e),l=>(d(),c("div",$e,[p("div",{ref_for:!0,ref_key:"animatedBars",ref:m,class:F(`rounded-md w-full transition-transform duration-[${u(r)}ms]`),style:D({background:u(we)(l),height:`${u(ye)(l,u(t).numbers)}%`}),"data-number":l.value},null,14,Ae)]))),256))]),p("div",Me,[(d(!0),c(j,null,L(u(X),l=>(d(),c("div",Re,[p("div",{class:"h-4 w-4 rounded",style:D(`background-color: ${l.color};`)},null,4),k(" "+G(l.label),1)]))),256))])]))}};export{Ue as default};
